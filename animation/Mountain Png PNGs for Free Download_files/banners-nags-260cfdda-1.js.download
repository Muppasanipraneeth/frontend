var l=Object.defineProperty;var d=(i,s,e)=>s in i?l(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e;var t=(i,s,e)=>(d(i,typeof s!="symbol"?s+"":s,e),e);import{_ as n}from"./preload-helper-be1680a6-1.js";import{C as c,r as _}from"./stimulus-helpers-17f3c993-1.js";import{n as o}from"./helpers-aaf8efb9-1.js";import{b as u}from"./plan-helpers-92e0e1bf-1.js";import{sendTrackingEvent as a,trackCompleteEvent as h,findCategoryByElement as p}from"./tracking-39df6e64-1.js";import{ay as E,e as f,az as g}from"./actions-c6ee89d5-1.js";import{C as r}from"./js-5386754e-1.js";import{E as C}from"./ez-base-controller-242f2ed1-1.js";import"./performance-helpers-20b701c9-1.js";import"./init-user-58d04eb1-1.js";import"./_commonjsHelpers-de833af9-1.js";class m extends c{constructor(){super(...arguments);t(this,"dismiss",e=>{e.preventDefault(),e.stopPropagation(),this.setDismissedCookie(),this.element.remove()})}connect(){this.setupSessionBanner(),o("annual_cart_abandonment")&&this.cookieValue&&a({element:this.element,data:{action:E,label:"Plan-Unlimited Annual Universal",non_interaction:!0}})}trackDiscount(){if(!o("annual_cart_abandonment"))return;const e=u({plans:[this.planValue]});a({data:{action:f,items:e}}),h({action:g,category:p(this.element),label:"Plan-Unlimited Annual Universal"})}setDismissedCookie(){if(this.cookieValue==="annual_cart_abandonment")return;const e=this.hasDismissExpiresValue?{domain:this.cookieDomain,expires:this.dismissExpiresValue}:{domain:this.cookieDomain};this.element.dataset.dismissSessionId||r.set(`${this.slugValue}_banner_dismissed`,"internal",e)}get cookieDomain(){const e=window.location.hostname.split(".");return`${e[1]}.${e[2]}`}setupSessionBanner(){const e=this.element.dataset.dismissSessionId;e&&sessionStorage.getItem(e)!=="1"&&this.element.classList.remove("is-hidden")}setSessionCookie(){const e=this.element.dataset.dismissSessionId;sessionStorage.setItem(e,"1")}removeBannerCookie(){r.remove(this.cookieValue)}}t(m,"values",{slug:String,dismissExpires:Number,cookie:String,plan:Object});class k extends C{connect(){this.element.classList.contains("ez-flash-message--auto-dismiss")&&n(()=>import("./dom-slider-55479872-1.js"),[]).then(()=>{this.slideUp=window.domSlider.slideUp,setTimeout(()=>{this.dismiss()},3e3)}),this.flagLoaded()}dismiss(){this.slideUp({element:this.element})}}_([["site-banner",m],["flash-message",k],["teams-nag",n(()=>import("./teams-nag-controller-ae292840-1.js"),[])],["language-switcher",n(()=>import("./language-switcher-controller-1fcac885-1.js"),[])]]);
