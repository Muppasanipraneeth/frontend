import{_ as s}from"./preload-helper-be1680a6-1.js";import{C as h,r as m,a as p}from"./stimulus-helpers-17f3c993-1.js";import{S as r,n as T,C as _}from"./helpers-aaf8efb9-1.js";import{E as f}from"./ez-base-controller-242f2ed1-1.js";import{M as g}from"./media-matcher-b9d0b27a-1.js";import{sendTrackingEvent as a}from"./tracking-39df6e64-1.js";import{aL as w}from"./actions-c6ee89d5-1.js";import{C as u}from"./js-5386754e-1.js";import"./performance-helpers-20b701c9-1.js";import"./init-user-58d04eb1-1.js";import"./_commonjsHelpers-de833af9-1.js";const i=new g;class n extends f{constructor(){super(...arguments),this.timer=null,this.updateTimer=()=>{const e=new Date().getTime(),t=this.countdownDate-e;this.days=this.calculateTimerValue({part:"days",distance:t}),this.hours=this.calculateTimerValue({part:"hours",distance:t}),this.minutes=this.calculateTimerValue({part:"minutes",distance:t}),this.seconds=this.calculateTimerValue({part:"seconds",distance:t}),this.inlineValue?this.renderInlineOutput():this.renderBlockOutput(),this.flagLoaded(),t<0&&clearInterval(this.timer)}}connect(){const e=this.countdownEndValue.replace(/"/g,"");this.countdownDate=new Date(e).getTime(),this.hasMobileDisableWidthValue?(i.addMediaQuery(`(min-width: ${this.mobileDisableWidthValue}px)`,()=>{this.startTimer()},()=>{this.timer&&clearInterval(this.timer)}),i.evaluateAll(),i.addListeners()):this.startTimer()}disconnect(){this.timer&&clearInterval(this.timer),this.hasMobileDisableWidthValue&&(i.removeListeners(),i.clearQueries())}startTimer(){this.timer=setInterval(this.updateTimer,1e3)}calculateTimerValue({part:e,distance:t}){switch(e){case"days":return Math.floor(t/(1e3*60*60*24));case"hours":return Math.floor(t%(1e3*60*60*24)/(1e3*60*60));case"minutes":return Math.floor(t%(1e3*60*60)/(1e3*60));case"seconds":default:return Math.floor(t%(1e3*60)/1e3)}}renderInlineOutput(){const e=[r(this.minutes),r(this.seconds)];this.days?(e.unshift(r(this.hours)),e.unshift(`${this.days}`)):e.unshift(`${this.hours}`),this.element.innerHTML=e.join(":")}renderBlockOutput(){const e=[this.renderTimerBlock("hours"),this.renderTimerBlock("minutes"),this.renderTimerBlock("seconds")];this.days&&e.unshift(this.renderTimerBlock("days")),this.element.innerHTML=e.join("")}renderTimerBlock(e){return`<span class="countdown-timer__unit-block">
              <span class="countdown-timer__unit-block__unit-value">${this[e]}</span>
              <span class="countdown-timer__unit-block__unit-text">${this[`${e}TextValue`]}</span>
            </span>`}}n.values={mobileDisableWidth:Number,countdownEnd:String,daysText:String,hoursText:String,minutesText:String,secondsText:String,inline:Boolean};class l extends n{constructor(){super(...arguments),this.timer=null,this.updateTimer=()=>{const e=new Date().getTime(),t=this.countdownDate-e;if(this.minutes=super.calculateTimerValue({part:"minutes",distance:t}),this.seconds=super.calculateTimerValue({part:"seconds",distance:t}),this.renderInlineOutput(),super.flagLoaded(),t<0){clearInterval(this.timer);const d=new CustomEvent("timer-reached-zero");window.dispatchEvent(d)}}}connect(){super.connect()}renderInlineOutput(){const e=[`${this.minutes}${this.minutesTextValue}`,`${this.seconds}${this.secondsTextValue}`];this.element.innerHTML=e.join(" : ")}}l.values={mobileDisableWidth:Number,countdownEnd:String,daysText:String,hoursText:String,minutesText:String,secondsText:String,inline:Boolean};class c extends h{constructor(){super(...arguments),this.dismissTimer=null,this.setAutoDismiss=()=>{this.dismissTimer=setTimeout(()=>{this.hide()},parseInt(this.element.dataset.dismissTimer,10))},this.close=()=>{if(this.element.dataset.dismissSessionId)this.setSessionCookie();else if(this.element.classList.contains("bundles-promo"))this.setBundlePopupCookie();else{const e="dismissed_promo_popup";u.set(e,"1",{expires:null})}this.remove(),this.element.classList.add("is-hidden")},this.hide=()=>{this.element.classList.add("fade-out"),this.remove()},this.remove=()=>{this.dismissTimer&&clearTimeout(this.dismissTimer),setTimeout(()=>{this.element.remove()},500)}}connect(){this.setupSessionPopup(),this.element.dataset.dismissTimer&&this.setAutoDismiss(),this.trackPopupTrigger()}trackPopupTrigger(){this.hasTrackTriggerActionValue&&(a({element:this.element,data:{action:this.trackTriggerActionValue,label:this.getResourceType(),non_interaction:!0}}),window.addEventListener("hidePromoPopup",this.hide))}getResourceType(){const e=document.querySelector("[data-resource-type]");if(!e)return"Other";const{resourceType:t}=e.dataset;return t[0].toUpperCase()+t.substring(1).toLowerCase()}disconnect(){window.removeEventListener("hidePromoPopup",this.hide)}setupSessionPopup(){const e=this.element.dataset.dismissSessionId;e&&sessionStorage.getItem(e)!=="1"&&this.element.classList.remove("is-hidden")}setSessionCookie(){const e=this.element.dataset.dismissSessionId;sessionStorage.setItem(e,"1")}setBundlePopupCookie(){const e=new Date(0);e.setUTCSeconds(parseInt(this.element.dataset.cookieExpiration,10)),u.set("dismissed_bundles_popup","1",{domain:this.cookieDomain,expires:e})}sendBundleClick(e){a({element:e.target,data:{action:w}})}get cookieDomain(){const e=window.location.hostname.split(".");return`${e[1]}.${e[2]}`}}c.values={trackTriggerAction:String};s(()=>import("./join-newsletter-95ca911d-1.js"),[]);m([["partner-popup",s(()=>import("./partner-popup-controller-a9f0df4a-1.js"),[])],["search-partner-popup",s(()=>import("./search-partner-popup-controller-5f68da69-1.js"),[])],["countdown-timer",n],["promo-popup",c],["cart-abandonment-countdown-timer",l]]);T("customer_feedback")&&(s(()=>import("./customer_feedback-e33d3fd4-1.js"),["assets/customer_feedback-be8cdb19.css"]),m([["customer-feedback-component",s(()=>import("./customer-feedback-component-controller-e47acd8a-1.js"),[])],["customer-feedback-form",s(()=>import("./customer-feedback-form-controller-96d2c891-1.js"),[])]]));document.querySelector("#post-purchase-welcome-modal")?p({name:"welcome-modal",import:s(()=>import("./welcome-modal-controller-f546aafb-1.js"),[])}):new URL(window.location.href).searchParams.has("purchase_confirmation")&&_("purchase_confirmation");
