import{_ as a}from"./preload-helper-be1680a6-1.js";import{C as f,r as w}from"./stimulus-helpers-17f3c993-1.js";import"./index-af68f786-1.js";import{E as u}from"./ez-base-controller-242f2ed1-1.js";import{e as h}from"./events-8df5dda9-1.js";import{t as y}from"./helpers-aaf8efb9-1.js";import k from"./ez-form-select-field-controller-33791956-1.js";import{E}from"./modal-controller-2745ccdd-1.js";import{G as m}from"./ez-custom-events-cfc2257b-1.js";import{M as L}from"./media-matcher-b9d0b27a-1.js";import"./performance-helpers-20b701c9-1.js";import"./_commonjsHelpers-de833af9-1.js";import"./js-5386754e-1.js";import"./init-user-58d04eb1-1.js";import"./rails-ujs-e70e4d86-1.js";class S extends u{constructor(){super(...arguments),this.blurSubMenu=e=>{this.element.contains(e.target)||this.closeDropDown()},this.openDropDown=()=>{window.addEventListener("keyup",this.allowEscClose),window.addEventListener("click",this.blurSubMenu),this.addLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.remove("is-closed"),this.element.classList.add("is-open")})},this.closeDropDown=()=>{window.removeEventListener("keyup",this.allowEscClose),window.removeEventListener("click",this.blurSubMenu),this.removeLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.add("is-closed"),this.element.classList.remove("is-open")})},this.allowEscClose=e=>{e.keyCode===27&&this.closeDropDown()}}connect(){this.element.addEventListener(h.util.ez_drop_down.close_drop_down,this.closeDropDown)}disconnect(){this.element.removeEventListener(h.util.ez_drop_down.close_drop_down,this.closeDropDown)}handleSubMenuClick(){this.element.classList.contains("is-open")?this.closeDropDown():this.openDropDown()}closeExploreMenuItems(){y("CloseSearchExploreSubMenus")}addLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(t=>{this.closeSubMenuOnClick()&&t.addEventListener("click",this.closeDropDown)})}removeLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(t=>{t.removeEventListener("click",this.closeDropDown)})}closeSubMenuOnClick(){return this.hasCloseOnLinkClickValue?this.closeOnLinkClickValue:!0}}S.values={closeOnLinkClick:Boolean};class n extends u{connect(){this.flagLoaded()}on(){this.elementTargets.forEach(e=>{e.classList.add(...this.nameClasses)})}off(){this.elementTargets.forEach(e=>{e.classList.remove(...this.nameClasses)})}}n.classes=["name"];n.targets=["element"];function d(s){let e;return(...t)=>{e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{s(...t)})}}const r=new L;class c extends f{constructor(){super(...arguments),this.lastScrolledPosition=window.scrollY,this.isScrolled=!1,this.setupSticky=()=>{this.setupStickyMediaQueries(),this.initialState(),window.addEventListener("scroll",this.normalScrollCheck)},this.initialState=()=>{this.stickElement(),this.showElement(),this.isCloseToTop()&&this.hideStickyHeaderSearchBar(),window.addEventListener("scroll",this.dynamicScrollCheck)},this.disableDynamicSticky=()=>{this.stickElement(),this.showElement(),window.removeEventListener("scroll",this.dynamicScrollCheck)},this.isScrollingUp=()=>this.lastScrolledPosition>window.scrollY,this.isScrolledToTop=()=>window.scrollY<=0,this.isCloseToTop=(e=!1)=>{const t=this.element,i=e?50:0;return window.scrollY<=t.offsetHeight+i},this.hasScrolledPastLastStickyElement=()=>{const e=document.querySelectorAll('[data-controller*="dynamic-sticky"]'),i=Array.from(e).reduce((o,l)=>{const p=o.offsetTop+o.offsetHeight;return l.offsetTop+l.offsetHeight>p?l:o});return window.scrollY>i.clientHeight},this.showElement=()=>{this.element.classList.contains(this.isStickyClass)&&requestAnimationFrame(()=>{this.element.classList.remove(this.hideElementClass),this.element.classList.add(this.showElementClass),this.showStickyHeaderSearchBar(),this.applyStickyOffset()})},this.hideElement=()=>{requestAnimationFrame(()=>{this.element.classList.remove(this.showElementClass),this.element.classList.add(this.hideElementClass),this.removeStickyOffset()})},this.unstickElement=()=>{requestAnimationFrame(()=>{this.element.classList.remove(this.showElementClass),this.element.classList.remove(this.isStickyClass)})},this.stickElement=()=>{this.element.classList.add(this.isStickyClass)},this.showStickyHeaderSearchBar=(e=!1)=>{this.mainSearchBar&&(!this.isCloseToTop(!0)||e)&&requestAnimationFrame(()=>{this.mainSearchBar.classList.add("is-visible"),requestAnimationFrame(()=>{this.searchField.disabled=!1})})},this.applyStickyOffset=()=>{if(!this.hasOffsetElementSelectorValue)return;const e=document.querySelector(this.offsetElementSelectorValue),t=this.element;requestAnimationFrame(()=>{t.style.top=`${e.offsetHeight}px`})},this.removeStickyOffset=()=>{const e=this.element;requestAnimationFrame(()=>{e.style.top="0"})},this.applyStickyHeader=()=>{this.isScrollingUp()?this.scrollingUpActions():this.scrollingDownActions(),this.lastScrolledPosition=window.scrollY},this.scrollingUpActions=()=>{this.showElement(),this.isScrolledToTop()&&this.unstickElement(),this.isCloseToTop()&&this.hideStickyHeaderSearchBar()},this.scrollingDownActions=()=>{this.hasScrolledPastLastStickyElement()&&(this.stickElement(),this.hideElement())},this.checkScroll=()=>{window.scrollY>this.scrollOffsetValue&&this.isScrolled===!1?(requestAnimationFrame(()=>{document.body.classList.add("is-scrolled")}),this.isScrolled=!0):window.scrollY<=0&&this.isScrolled===!0&&(requestAnimationFrame(()=>{document.body.classList.remove("is-scrolled")}),this.isScrolled=!1)},this.normalScrollCheck=d(this.checkScroll),this.dynamicScrollCheck=d(()=>{this.applyStickyHeader()})}connect(){this.waitToGetSticky()?window.addEventListener(m,this.setupSticky):this.setupSticky(),window.addEventListener("resize",this.applyStickyOffset)}disconnect(){window.removeEventListener(m,this.setupSticky),window.removeEventListener("resize",this.applyStickyOffset),window.removeEventListener("scroll",this.normalScrollCheck),window.removeEventListener("scroll",this.dynamicScrollCheck)}setupStickyMediaQueries(){r.addMediaQuery("(max-width: 635px)",()=>this.showStickyHeaderSearchBar(!0),this.initialState),r.evaluateAll(),r.addListeners()}hideStickyHeaderSearchBar(){!this.mobileSearchButtonVisible()&&document.body.classList.contains("main-search-soft-hidden")&&this.mainSearchBar&&requestAnimationFrame(()=>{this.mainSearchBar.classList.remove("is-visible"),requestAnimationFrame(()=>{this.searchField.disabled=!0})})}mobileSearchButtonVisible(){const e=document.querySelector('[data-action*="click->site-header#toggleMobileSearch"]');return e?getComputedStyle(e).display!=="none":!1}waitToGetSticky(){return window.waitToGetSticky||this.waitToInitValue}get mainSearchBar(){return document.querySelector(".ez-site-header__search-fullwidth")}get searchField(){return this.mainSearchBar.querySelector(".ez-search-form__input")}}c.classes=["isSticky","showElement","hideElement"];c.values={mobileOnly:{type:Number,default:0},waitToInit:{type:Boolean,default:!1},offsetElementSelector:String,scrollOffset:{type:Number,default:0}};w([["ez-drop-down",S],["ez-form-select",k],["ez-modal",E],["toggle-class",n],["dynamic-sticky",c],["scroll-top",a(()=>import("./scroll-top-controller-b603aeb1-1.js"),[])],["success-modal",a(()=>import("./success-modal-controller-8a84bce2-1.js"),[])]]);
